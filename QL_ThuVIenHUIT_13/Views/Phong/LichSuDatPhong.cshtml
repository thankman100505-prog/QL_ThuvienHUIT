@model List<QL_ThuVIenHUIT_13.Models.PHIEU_MUONPHONG>

@{
    ViewBag.Title = "Lịch sử đặt phòng";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>Lịch sử đặt phòng</h2>

@if (!Model.Any())
{
    <p>Chưa có lịch sử đặt phòng.</p>
}
else
{
    <table border="1" cellpadding="8" cellspacing="0" style="width:100%">
        <thead>
            <tr>
                <th>Mã phiếu</th>
                <th>Mã phòng</th>
                <th>Mã thẻ</th>
                <th>Ngày mượn</th>
                <th>Giờ mượn</th>
                <th>Giờ trả</th>
                <th>Số người</th>
                <th>Mục đích</th>
                <th>Thao tác</th>
            </tr>
        </thead>

        <tbody>
            @foreach (var p in Model)
            {
                <tr>
                    <td>@p.MAPHIEU</td>
                    <td>@p.MAPH</td>
                    <td>@p.MATHE</td>
                    <td>@p.NGAYMUON?.ToString("dd/MM/yyyy")</td>
                    <td>@p.GIOMUON</td>
                    <td>@p.GIOTRA</td>
                    <td>@p.SL_NGUOITHAMGIA</td>
                    <td>@p.MUCDICH</td>
                    <td>
                        @(p.TRANGTHAI == 0 ? "Chờ duyệt" :
                          p.TRANGTHAI == 1 ? "Đã duyệt" : "Từ chối")
                    </td>

                    <td>
                        <a href="@Url.Action("SuaDatPhong", "Phong", new { id = p.MAPHIEU })">
                            Sửa
                        </a>
                        |
                        <a href="@Url.Action("XoaDatPhong", "Phong", new { id = p.MAPHIEU })"
                           onclick="return confirm('Bạn có chắc muốn xóa phiếu này không?');">
                            Xóa
                        </a>
                    </td>
                </tr>
            }
        </tbody>
    </table>
}
