<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>@ViewBag.Title - Thư viện HUIT</title>
    <link href="~/Content/bootstrap.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,300;0,400;0,500;0,700;1,400&display=swap" rel="stylesheet">
    <link href="~/Content/Site.css" rel="stylesheet" />
    @RenderSection("Styles", required: false)
</head>
<body>

    <div class="top-header">
        <div class="container header-flex">
            <div class="brand-section">
                <a href="@Url.Action("Index", "Home")">
                    <img src="~/images/logo.jpg" alt="Logo HUIT" class="logo-img" />
                </a>
                <div class="site-titles">
                    <h3>TRƯỜNG ĐẠI HỌC CÔNG THƯƠNG TP. HỒ CHÍ MINH</h3>
                    <h2>TRUNG TÂM THÔNG TIN - THƯ VIỆN</h2>
                </div>
            </div>

            <div class="user-login">
                @if (Session["User_info"] == null)
                {
                    <a href="@Url.Action("SignIn", "User")" class="text-primary fw-bold"><i class="fa fa-user me-1"></i> Đăng nhập</a>
                    <span class="mx-2 text-muted">|</span>
                    <a href="@Url.Action("Register", "User")" class="fw-bold">Đăng ký</a>
                }
                else
                {
                    <div class="dropdown">
                        <a href="#" class="dropdown-toggle text-dark fw-bold d-flex align-items-center"
                           data-bs-toggle="dropdown" aria-expanded="false" style="text-decoration: none; gap: 8px;">
                            <div style="width: 30px; height: 30px; background: #f0f7ff; border-radius: 50%; display: flex; align-items: center; justify-content: center;">
                                <i class="fa fa-user text-primary" style="font-size: 0.9rem;"></i>
                            </div>
                            <span>Xin chào, @Session["NameDisplay"]</span>
                            <i class="fa fa-chevron-down text-muted" style="font-size: 0.7rem;"></i>
                        </a>

                        <ul class="dropdown-menu dropdown-menu-end">
                            <li><a class="dropdown-item" href="@Url.Action("ProfileUser", "User")"><i class="fa fa-id-card me-2"></i> Thông tin tài khoản</a></li>
                            <li><a class="dropdown-item" href="@Url.Action("ChangePassword", "User")"><i class="fa fa-key me-2"></i> Đổi mật khẩu</a></li>
                            <li><hr class="dropdown-divider"></li>
                            <li><a class="dropdown-item text-danger fw-bold" href="@Url.Action("Logout", "User")"><i class="fa fa-sign-out-alt me-2"></i> Đăng xuất</a></li>
                        </ul>
                    </div>
                }
            </div>
        </div>
    </div>

    <div class="search-bar-section">
        <div class="container">
            <form action="@Url.Action("Search", "Book")" method="get" class="search-wrapper">

                <div style="position:relative; flex-grow:1;">
                    <i class="fa fa-search search-icon"></i>
                    <input type="text" name="keyword" class="search-input" placeholder="Nhập tên sách, tác giả, tài liệu cần tìm..." style="width: 100%;" />
                </div>

                <button type="submit" class="btn-timkiem" style="white-space: nowrap;">
                    TÌM KIẾM
                </button>
            </form>
        </div>
    </div>

    <div class="menu">
        <div class="container">
            <ul>
                <li><a href="@Url.Action("Index", "Home")"><i class="fa fa-home"></i> TRANG CHỦ</a></li>
                <li><a href="@Url.Action("About", "Home")">GIỚI THIỆU</a></li>
                <li><a href="@Url.Action("ChiTiet", "TinTuc")">TIN TỨC</a></li>
                <li>
                    <a href="#">HƯỚNG DẪN <i class="fa fa-caret-down" style="margin-left: 10px;"></i></a>
                    <ul>
                        <li><a href="@Url.Action("HuongDan_DK_The", "Home")">HƯỚNG DẪN ĐĂNG KÝ THẺ</a></li>
                        <li><a href="@Url.Action("HuongDan_SD_PhongHop", "Home")">HƯỚNG DẪN MƯỢN PHÒNG </a></li>
                    </ul>
                </li>

                @if (Session["User_info"] != null && Session["Role"] != null)
                {
                    int role = 0;
                    int.TryParse(Session["Role"].ToString(), out role);
                    if (role == 1)
                    {
                        <li>
                            <a href="#" style="color: #ffc107;">QUẢN TRỊ <i class="fa fa-caret-down"></i></a>
                            <ul>
                                <li><a href="@Url.Action("Index", "StaffManager")">QL NHÂN VIÊN</a></li>
                                <li><a href="@Url.Action("Rules", "StaffManager")">QUY ĐỊNH</a></li>
                                <li><a href="@Url.Action("Stats", "StaffManager")">BÁO CÁO</a></li>
                            </ul>
                        </li>
                    }
                    if (role == 1 || role == 2)
                    {
                        <li>
                            <a href="#" style="color: #0dcaf0;">NGHIỆP VỤ <i class="fa fa-caret-down"></i></a>
                            <ul>
                                <li><a href="@Url.Action("QuanLySach", "Sach")">KHO SÁCH</a></li>
                                <li><a href="@Url.Action("Index", "MuonSach")">MƯỢN SÁCH TẠI QUẦY</a></li>
                                <li><a href="@Url.Action("DuyetMuonSach", "StaffManager")">DUYỆT MƯỢN SÁCH</a></li>
                                <li><a href="@Url.Action("TraSach", "StaffManager")">TRẢ SÁCH</a></li>
                                <li><a href="@Url.Action("ChoDuyet", "AdminPhong")">DUYỆT MƯỢN PHÒNG</a></li>
                                <li><a href="@Url.Action("QLPhongHop", "StaffManager")">QUẢN LÝ PHÒNG</a></li>
                                <li><a href="@Url.Action("QLDocGia", "StaffManager")">QL ĐỘC GIẢ</a></li>
                                <li><a href="@Url.Action("NhapSach", "Sach")">NHẬP SÁCH</a></li>
                            </ul>
                        </li>
                    }
                    if (role == 3)
                    {
                        <li>
                            <a href="#" style="color: #0d6efd;">CÁ NHÂN <i class="fa fa-caret-down"></i></a>
                            <ul>
                                <li><a href="@Url.Action("TrangGioSach", "MuonSach")">GIỎ SÁCH</a></li>
                                <li><a href="@Url.Action("SachDangMuon", "MuonSach")">SÁCH ĐANG MƯỢN</a></li>
                                <li><a href="@Url.Action("SachDaMuon", "MuonSach")">LỊCH SỬ MƯỢN SÁCH</a></li>
                                <li><a href="@Url.Action("DatPhong", "Phong")">ĐẶT PHÒNG HỌP</a></li>
                                <li><a href="@Url.Action("LichSuDatPhong", "Phong")">LỊCH SỬ ĐẶT PHÒNG</a></li>
                            </ul>
                        </li>


                    }
                }
                <li><a href="@Url.Action("Index", "Sach")">Sách</a></li>
            </ul>
        </div>
    </div>

    <div class="container mt-40 mb-40" style="min-height: 500px;">

        @if (TempData["Success"] != null)
        {
            <div class="alert alert-success alert-dismissible fade show" role="alert">
                <i class="fa fa-check-circle me-2"></i> @TempData["Success"]
                <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
            </div>
        }
        @if (TempData["Error"] != null)
        {
            <div class="alert alert-danger alert-dismissible fade show" role="alert">
                <i class="fa fa-exclamation-circle me-2"></i> @TempData["Error"]
                <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
            </div>
        }

        @RenderBody()
    </div>

    <footer>
        <div class="footer-top">
            <div class="container">
                <div class="footer-grid">
                    <div class="footer-info">
                        <h4>TRUNG TÂM THÔNG TIN - THƯ VIỆN HUIT</h4>
                        <p><i class="fa fa-map-marker-alt me-2"></i> 140 Lê Trọng Tấn, P. Tây Thạnh, Q. Tân Phú, TP.HCM</p>
                        <p><i class="fa fa-envelope me-2"></i> thuvien@huit.edu.vn</p>
                        <p><i class="fa fa-phone me-2"></i> (028) 3816 1673</p>
                        <div class="footer-links-inline">
                            <a href="#">Giới thiệu</a> | <a href="#">Nội quy</a> | <a href="#">Hướng dẫn</a>
                        </div>
                    </div>
                    <div class="footer-stats">
                        <h4>THỐNG KÊ TRUY CẬP</h4>
                        <p>Đang truy cập: <strong>12</strong></p>
                        <p>Hôm nay: <strong>1,240</strong></p>
                        <p>Tháng này: <strong>35,600</strong></p>
                        <p>Tổng lượt truy cập: <strong>8,920,400</strong></p>
                    </div>
                </div>
            </div>
        </div>
        <div class="footer-bottom">
            <div class="container text-center">
                Copyright © @DateTime.Now.Year HUIT Library. All rights reserved.
            </div>
        </div>
    </footer>

    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="~/Scripts/bootstrap.bundle.min.js"></script>
    @RenderSection("scripts", required: false)
</body>
</html>